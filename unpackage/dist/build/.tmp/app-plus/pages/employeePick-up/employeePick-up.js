(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/employeePick-up/employeePick-up"],{"06ce":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i})},"0ff5":function(e,t,n){"use strict";n.r(t);var s=n("8cc0"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,function(){return s[e]})}(r);t["default"]=i.a},"5eec":function(e,t,n){"use strict";(function(e){n("6e31"),n("921b");s(n("66fd"));var t=s(n("66c8"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"66c8":function(e,t,n){"use strict";n.r(t);var s=n("06ce"),i=n("0ff5");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("e34c");var a=n("2877"),c=Object(a["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=c.exports},"8cc0":function(e,t,n){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n("a2ef")),r=a(n("012e"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};s.get||s.set?Object.defineProperty(t,n,s):t[n]=e[n]}return t.default=e,t}var o={onLoad:function(){r.default.that=this,this.shop=r.default.shop,e.getStorage({key:"ClientAddr",success:function(e){r.default.that.client=e.data}})},onReady:function(){this.getAllStaff(this.shop),this.checki=0},data:function(){return{client:"",shop:{},sackIndex:"",existType:"",type:"",inUseOrder:[],orIndex:"0",opStaff:[],name:"员工名称",No:"员工编号",pickUpSum:0,staffs:[],check:"",checki:""}},methods:{LoginStatus:function(){""==r.default.that.client&&(r.default.that.$refs.anRef.show("登录失效，请重新登录",{type:"error"}),setTimeout(i.toLogin,1200))},existFruit:function(){var e=this;if(this.$options.methods.LoginStatus(),""!=this.sackIndex){this.inUseOrder=[];var t={boxIndex:this.sackIndex},n=JSON.stringify(t),s="api/Applet.ashx?Function=HttpGetDeviceIDOrderByVirtual";i.multiplexFun(this.client,n,s).then(function(t){if("成功"==t.data.State){var n=new Array;if(n=t.data.Body,0==n.length)e.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"});else{for(var s=0;s<n.length;s++)0==n[s].state&&e.inUseOrder.push(n[s]);0==e.inUseOrder.length&&e.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"})}}})}else this.$refs.anRef.show("输入袋子编号或扫码",{type:"warn"})},checkAll:function(){if(0!=this.inUseOrder.length){0==this.checki?this.check=!1:this.check=!0;for(var e=0;e<this.inUseOrder.length;e++)if(0==this.inUseOrder[e].checked){this.check=!1;break}for(var t=0;t<this.inUseOrder.length;t++)this.inUseOrder[t].checked=!this.check,this.inUseOrder[t].checked?this.pickUpSum=this.inUseOrder.length:this.pickUpSum=0;this.checki=1}else this.$refs.anRef.show("未查询到订单",{type:"warn"})},selectEmployee:function(e){this.orIndex=e.target.value,this.name=this.staffs[this.orIndex].Name,this.No=this.staffs[this.orIndex].pkNo},sweepCode:function(){e.scanCode({success:function(e){r.default.that.sackIndex=e.resultStr.split("?boxIndex=")[1],r.default.that.existFruit()}})},totalSum:function(){for(var e=this,t=new Array,n=new Array,s=0;s<this.inUseOrder.length;s++)1==this.inUseOrder[s].checked&&(t.push(this.inUseOrder[s].pkNo),n.push(this.inUseOrder[s].boxIndex));if(t.length<1)this.$refs.anRef.show("取件失败，你未选择收取衣物",{type:"warn"});else if("员工编号"!=this.No){var r={fkWorkerNo:this.No,Reserve:t,boxIndex:n};this.$options.methods.LoginStatus();var a=JSON.stringify(r),c="api/Applet.ashx?Function=HttpVirtualReservationReceive";i.multiplexFun(this.client,a,c).then(function(t){"失败"==t.data.State&&"你没有收衣的权限"==t.data.Reason?e.$refs.anRef.show("取件失败，该员工没有收衣权限",{type:"warn"}):"失败"==t.data.State&&"员工确认有误"==t.data.Reason?e.$refs.anRef.show("取件失败，员工确认有误",{type:"warn"}):"成功"==t.data.State&&(e.$refs.anRef.show("取件成功",{type:"success"}),setTimeout(e.existFruit,500))})}else this.$refs.anRef.show("取件失败，请选择收件员工",{type:"warn"})},changeCheck:function(e){var t=0;e.checked=!e.checked,this.pickUpSum;for(var n=0;n<this.inUseOrder.length;n++)1==this.inUseOrder[n].checked&&(t+=1);this.pickUpSum=t},getAllStaff:function(e){var t,n=this,s={};this.$options.methods.LoginStatus();var r=JSON.stringify(s),a="api/Manager.ashx?Function=HttpQueryAllNormalWorkers";i.multiplexFun(this.client,r,a).then(function(e){if("成功"==e.data.State){n.staffs=e.data.Body;for(var s=0;s<n.staffs.length;s++)t=n.staffs[s].Name+"： "+n.staffs[s].pkNo,n.opStaff.push(t)}})}}};t.default=o}).call(this,n("6e42")["default"],n("0de9")["default"])},c92c:function(e,t,n){},e34c:function(e,t,n){"use strict";var s=n("c92c"),i=n.n(s);i.a}},[["5eec","common/runtime","common/vendor"]]]);