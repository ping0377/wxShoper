(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-employeePick-up-employeePick-up"],{2456:function(e,t,i){"use strict";var n={"an-layer":i("69fd").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"alldata"},[i("an-layer",{ref:"anRef",attrs:{autoClose:!0,timer:"2"}}),i("v-uni-view",{staticClass:"sweep_code"},[i("v-uni-view",{staticClass:"sweep_code_data"},[i("v-uni-input",{attrs:{placeholder:"请输入袋子编号,或扫码"},model:{value:e.sackIndex,callback:function(t){e.sackIndex=t},expression:"sackIndex"}}),i("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.existFruit.apply(void 0,arguments)}}},[e._v("确定")]),i("v-uni-text",{staticClass:"iconfont uni-bold",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sweepCodeh5.apply(void 0,arguments)}}},[e._v("")])],1)],1),i("v-uni-view",{staticClass:"orders"},e._l(e.inUseOrder,(function(t,n){return i("v-uni-view",{key:n,staticClass:"info_view"},[i("v-uni-view",{staticClass:"checkbox"},[i("v-uni-checkbox",{attrs:{value:"c",checked:t.checked},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.changeCheck(t)}}})],1),i("v-uni-view",{staticClass:"sackinfo"},[i("v-uni-view",{staticClass:"uni-bold"},[i("v-uni-text",[e._v(e._s(t.nameBox)+":")]),i("v-uni-text",[e._v(e._s(t.boxIndex))])],1),i("v-uni-view",{},[i("v-uni-text",[e._v("预约单号:")])],1),i("v-uni-view",{},[i("v-uni-text",[e._v(e._s(t.pkNo))])],1)],1),i("v-uni-view",{staticClass:"distime"},[i("v-uni-view",{staticClass:"uni-bold"},[e._v("处理中")]),i("v-uni-view",{},[e._v(e._s(t.createDt))])],1)],1)})),1),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"option"},[i("v-uni-button",{staticClass:"checkall",attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checkAll.apply(void 0,arguments)}}},[e._v("全选")]),i("v-uni-picker",{staticClass:"select",attrs:{mode:"selector",range:e.opStaff},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.selectEmployee.apply(void 0,arguments)}}},[i("v-uni-view",[i("v-uni-text",[e._v(e._s(e.name))]),i("v-uni-text",[e._v(e._s(e.No))]),i("v-uni-text",{staticClass:"iconfont"},[e._v("")])],1)],1)],1),i("v-uni-button",{staticClass:"confirm uni-bold",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.totalSum.apply(void 0,arguments)}}},[e._v("确定取件（已选"),i("v-uni-text",{domProps:{textContent:e._s(e.pickUpSum)}}),e._v("单）")],1)],1)],1)},s=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}))},"7e2d":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-0e365399]{background-color:#d8d8d8}.alldata[data-v-0e365399]{padding-top:%?60?%}.sweep_code[data-v-0e365399]{margin:0 0 %?20?% %?20?%}.sweep_code_data[data-v-0e365399]{position:relative}.sweep_code_data uni-text[data-v-0e365399]{font-size:%?50?%;position:absolute;left:%?415?%;top:%?-3?%}.sweep_code .sweep_code_data uni-input[data-v-0e365399]{width:%?430?%;height:%?80?%;line-height:%?80?%;min-height:%?80?%;border:1px solid;background-color:#fff;display:inline-block;border-radius:%?160?% %?160?% %?160?% %?160?%;padding-left:%?60?%;margin-right:%?15?%}.sweep_code_data .iconfont[data-v-0e365399]{z-index:3}.sweep_code uni-button[data-v-0e365399]{display:inline-block;width:%?200?%;height:%?80?%;line-height:%?80?%;background-color:#007aff;border-radius:%?160?% %?160?% %?160?% %?160?%;color:#fff}.info_view[data-v-0e365399]{border-bottom:2px solid #d8d8d8;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap}.checkbox[data-v-0e365399]{width:%?120?%;height:%?120?%;position:relative}.checkbox uni-checkbox[data-v-0e365399]{position:absolute;top:50%;left:50%;-webkit-transform:scale(.9) translate(-50%,-50%);transform:scale(.9) translate(-50%,-50%)}.sackinfo[data-v-0e365399]{width:54%}.distime[data-v-0e365399]{width:35%;text-align:center}.option[data-v-0e365399]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:rwo nowrap;flex-flow:rwo nowrap}.checkall[data-v-0e365399]{width:40%;height:%?71?%;background-color:#fff;font-size:%?32?%;line-height:%?75?%;margin-right:%?30?%}\n.select[data-v-0e365399]{width:58%;height:35px;background-color:#fff;border:1px solid #d8d8d8;padding:%?10?%;border-radius:%?10?%}\n.select uni-view[data-v-0e365399]{border:1px solid #d8d8d8;border-radius:%?7?%}.select uni-view uni-text[data-v-0e365399]{display:inline-block}.select uni-view uni-text[data-v-0e365399]:first-child{width:45%;text-indent:3px}.select uni-view uni-text[data-v-0e365399]:nth-of-type(2){width:46%;text-indent:1em}.select .iconfont[data-v-0e365399]{font-size:%?22?%}.confirm[data-v-0e365399]{background-color:#0a98d5;color:#fff}.footer[data-v-0e365399]{width:100%;position:absolute;bottom:0}body.?%PAGE?%[data-v-0e365399]{background-color:#d8d8d8}",""]),e.exports=t},b4c9:function(e,t,i){"use strict";var n=i("f467"),a=i.n(n);a.a},c5b8:function(e,t,i){"use strict";var n=i("4a46"),a=i("ee27");i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("8bd4")),o=n(i("a45c")),r=a(i("ae1b")),c={onLoad:function(){o.Prompt(),r.default.that=this,this.shop=r.default.shop,uni.getStorage({key:"ClientAddr",success:function(e){r.default.that.client=e.data}})},onReady:function(){if("android"==uni.getSystemInfoSync().platform){var e=location.href,t={PageUrl:e},i=JSON.stringify(t);o.getConfig(r.default.that.client,i)}this.getAllStaff(this.shop),this.checki=0},data:function(){return{client:"",shop:{},sackIndex:"",existType:"",type:"",inUseOrder:[],orIndex:"0",opStaff:[],name:"员工名称",No:"员工编号",pickUpSum:0,staffs:[],check:"",checki:""}},methods:{LoginStatus:function(){""==r.default.that.client&&(r.default.that.$refs.anRef.show("登录失效，请重新登录",{type:"error"}),setTimeout(o.toLogin,1200))},existFruit:function(){var e=this;if(this.$options.methods.LoginStatus(),""!=this.sackIndex){this.inUseOrder=[];var t={boxIndex:this.sackIndex},i=JSON.stringify(t),n="api/Applet.ashx?Function=HttpGetDeviceIDOrderByVirtual";o.multiplexFun(this.client,i,n).then((function(t){if("成功"==t.data.State){var i=new Array;if(i=t.data.Body,0==i.length)e.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"});else{for(var n=0;n<i.length;n++)0==i[n].state&&e.inUseOrder.push(i[n]);0==e.inUseOrder.length&&e.$refs.anRef.show("该收衣袋没有待取件订单，或者收衣袋编号有误",{type:"warn"})}}}))}else this.$refs.anRef.show("输入袋子编号或扫码",{type:"warn"})},checkAll:function(){if(0!=this.inUseOrder.length){0==this.checki?this.check=!1:this.check=!0;for(var e=0;e<this.inUseOrder.length;e++)if(0==this.inUseOrder[e].checked){this.check=!1;break}for(var t=0;t<this.inUseOrder.length;t++)this.inUseOrder[t].checked=!this.check,this.inUseOrder[t].checked?this.pickUpSum=this.inUseOrder.length:this.pickUpSum=0;this.checki=1}else this.$refs.anRef.show("未查询到订单",{type:"warn"})},selectEmployee:function(e){this.orIndex=e.target.value,this.name=this.staffs[this.orIndex].Name,this.No=this.staffs[this.orIndex].pkNo},sweepCodeh5:function(){s.default.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){console.log("成功"),r.default.that.sackIndex=e.resultStr.split("?boxIndex=")[1],r.default.that.existFruit()}})},totalSum:function(){for(var e=this,t=new Array,i=new Array,n=0;n<this.inUseOrder.length;n++)1==this.inUseOrder[n].checked&&(t.push(this.inUseOrder[n].pkNo),i.push(this.inUseOrder[n].boxIndex));if(t.length<1)this.$refs.anRef.show("取件失败，你未选择收取衣物",{type:"warn"});else if("员工编号"!=this.No){var a={fkWorkerNo:this.No,ReserveNo:t,boxIndex:i};this.$options.methods.LoginStatus();var s=JSON.stringify(a),r="api/Applet.ashx?Function=HttpVirtualReservationReceive";o.multiplexFun(this.client,s,r).then((function(t){"失败"==t.data.State&&"你没有收衣的权限"==t.data.Reason?e.$refs.anRef.show("取件失败，该员工没有收衣权限",{type:"warn"}):"失败"==t.data.State&&"员工确认有误"==t.data.Reason?e.$refs.anRef.show("取件失败，员工确认有误",{type:"warn"}):"成功"==t.data.State&&(e.$refs.anRef.show("取件成功",{type:"success"}),setTimeout(e.existFruit,500))}))}else this.$refs.anRef.show("取件失败，请选择收件员工",{type:"warn"})},changeCheck:function(e){var t=0;e.checked=!e.checked,this.pickUpSum;for(var i=0;i<this.inUseOrder.length;i++)1==this.inUseOrder[i].checked&&(t+=1);this.pickUpSum=t},getAllStaff:function(e){var t,i=this,n={};this.$options.methods.LoginStatus();var a=JSON.stringify(n),s="api/Manager.ashx?Function=HttpQueryAllNormalWorkers";o.multiplexFun(this.client,a,s).then((function(e){if("成功"==e.data.State){i.staffs=e.data.Body;for(var n=0;n<i.staffs.length;n++)t=i.staffs[n].Name+"： "+i.staffs[n].pkNo,i.opStaff.push(t)}}))}}};t.default=c},df8b:function(e,t,i){"use strict";i.r(t);var n=i("c5b8"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},f467:function(e,t,i){var n=i("7e2d");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("1b45ba2c",n,!0,{sourceMap:!1,shadowMode:!1})},f88e:function(e,t,i){"use strict";i.r(t);var n=i("2456"),a=i("df8b");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("b4c9");var o,r=i("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"0e365399",null,!1,n["a"],o);t["default"]=c.exports}}]);