(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customerPick-up-customerPick-up"],{"1d29":function(t,e,o){var n=o("c4a1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("27c25b40",n,!0,{sourceMap:!1,shadowMode:!1})},"3f95":function(t,e,o){"use strict";var n=o("4a46"),i=o("ee27");o("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(o("8bd4")),r=n(o("a45c")),s=i(o("ae1b")),d={onLoad:function(){r.Prompt(),s.default.that=this,uni.getStorage({key:"ClientAddr",success:function(t){s.default.that.client=t.data}})},onReady:function(){if("android"==uni.getSystemInfoSync().platform){var t=location.href,e={PageUrl:t},o=JSON.stringify(e);r.getConfig(s.default.that.client,o)}},data:function(){return{orderNo:"",client:"",orderInfo:{},skip:"../orderFormDetails/orderFormDetails?item=",ordinfo:!0}},methods:{setLoginStatus:function(){""==this.client&&(this.$refs.anRef.show("登录失效，请重新登录",{type:"error"}),setTimeout(r.toLogin,700))},existFruit:function(){var t=this;if(this.$options.methods.setLoginStatus(),""==this.orderNo)return this.orderInfo={},void this.$refs.anRef.show("请输入预约单号或扫码",{type:"warn"});var e={fkReserveNo:this.orderNo},o="api/Applet.ashx?Function=HttpQueryUserInfoByTake",n=JSON.stringify(e);r.multiplexFun(this.client,n,o).then((function(e){console.log(e),null==e.data.Body?(t.$refs.anRef.show("不存在该订单或者该订单已被取走",{type:"warn"}),t.orderInfo.state=4):"成功"==e.data.State&&null!=e.data.Body&&(t.orderInfo=e.data.Body,t.orderInfo.state=3)}))},sweepCodeh5:function(){a.default.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(t){if(s.default.that.orderNo=t.resultStr,""!=s.default.that.orderNo){s.default.that.orderInfo.pkNo=s.default.that.orderNo,s.default.that.orderInfo.state=1;var e={pkNo:s.default.that.orderNo},o=JSON.stringify(e),n="api/WeChatUser.ashx?Function=HttpQueryReservationInfo";r.multiplexFun(s.default.that.client,o,n).then((function(t){0==t.data.Body.length?s.default.that.ordinfo=!0:s.default.that.ordinfo=!1}))}setTimeout((function(){s.default.that.existFruit()}),0)}})},pickUp:function(){var t=this;if(this.orderInfo.fkUserNo){this.$options.methods.setLoginStatus();var e={fkUserNo:this.orderInfo.fkUserNo,fkReserveNo:this.orderInfo.fkReserveNo,boxIndex:this.orderInfo.boxIndex},o="api/Applet.ashx?Function=HttpUserTakeClothes",n=JSON.stringify(e);r.multiplexFun(this.client,n,o).then((function(e){console.log(e),"成功"==e.data.State?(t.$refs.anRef.show("取件成功",{type:"success"}),t.orderInfo.state=4):"失败"==e.data.State&&-1!=e.data.Reason.indexOf("预约单已取走")?(t.$refs.anRef.show("取件失败，该订单已被取走",{type:"warn"}),t.orderInfo.state=4):"失败"==e.data.State&&-1!=e.data.Reason.indexOf("缺少客户编号")&&t.$refs.anRef.show("取件失败，缺少该订单信息",{type:"warn"})}))}else this.$refs.anRef.show("请先核对订单信息",{type:"warn"})},setOrderInfo:function(){this.ordinfo?this.$refs.anRef.show("请检查预约单号",{type:"warn"}):uni.navigateTo({url:this.skip+encodeURIComponent(JSON.stringify(this.orderInfo))+"&state="+encodeURIComponent(JSON.stringify(this.orderInfo.state))})},getInfo:function(){var t=this;if(""!=this.orderNo){this.orderInfo.pkNo=this.orderNo,this.orderInfo.state=1;var e={pkNo:this.orderNo},o=JSON.stringify(e),n="api/WeChatUser.ashx?Function=HttpQueryReservationInfo";r.multiplexFun(this.client,o,n).then((function(e){0==e.data.Body.length?t.ordinfo=!0:t.ordinfo=!1}))}}}};e.default=d},9627:function(t,e,o){"use strict";var n={"an-layer":o("69fd").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"alldata"},[o("an-layer",{ref:"anRef",attrs:{autoClose:!0,timer:"2"}}),o("v-uni-view",{staticClass:"sweep_code"},[o("v-uni-view",{staticClass:"sweep_code_data"},[o("v-uni-input",{attrs:{placeholder:"请输入预约单号,或扫码"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getInfo.apply(void 0,arguments)}},model:{value:t.orderNo,callback:function(e){t.orderNo=e},expression:"orderNo"}}),o("v-uni-button",{staticClass:"uni-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.existFruit.apply(void 0,arguments)}}},[t._v("订单信息")]),o("v-uni-text",{staticClass:"iconfont uni-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sweepCodeh5.apply(void 0,arguments)}}},[t._v("")])],1)],1),o("v-uni-view",{staticClass:"exist_view"},[o("v-uni-view",{staticClass:"exist_info"},[o("v-uni-view",{},[o("v-uni-text",[t._v("预约单号：")]),o("v-uni-text",[t._v(t._s(t.orderInfo.fkReserveNo))])],1),o("v-uni-view",{},[o("v-uni-text",[t._v("客户名称：")]),o("v-uni-text",[t._v(t._s(t.orderInfo.Name))])],1),o("v-uni-view",{staticClass:"uni-bold"},[o("v-uni-text",[t._v("取件码：")]),o("v-uni-text",[t._v(t._s(t.orderInfo.code))])],1),o("v-uni-view",{staticClass:"button_view"},[o("v-uni-button",{staticClass:"uni-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setOrderInfo.apply(void 0,arguments)}}},[t._v("查看订单详情")]),o("v-uni-button",{staticClass:"uni-bold",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pickUp.apply(void 0,arguments)}}},[t._v("取件")])],1)],1)],1)],1)},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}))},"98a2":function(t,e,o){"use strict";o.r(e);var n=o("9627"),i=o("fde8");for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("fe0b");var r,s=o("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"23cc6472",null,!1,n["a"],r);e["default"]=d.exports},c4a1:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".alldata[data-v-23cc6472]{height:100vh;background-color:#d8d8d8}.sweep_code[data-v-23cc6472]{margin:0 0 %?20?% %?20?%;padding-top:%?60?%}.sweep_code_data[data-v-23cc6472]{position:relative}.sweep_code_data uni-button[data-v-23cc6472]{font-size:%?31?%}.sweep_code_data uni-text[data-v-23cc6472]{font-size:%?50?%;position:absolute;left:%?415?%;top:%?-3?%}.sweep_code_data .iconfont[data-v-23cc6472]{z-index:2}.sweep_code .sweep_code_data uni-input[data-v-23cc6472]{width:%?365?%;height:%?80?%;line-height:%?80?%;min-height:%?80?%;border:1px solid;background-color:#fff;display:inline-block;border-radius:%?160?% %?160?% %?160?% %?160?%;padding:0 %?85?% 0 %?60?%;margin-right:%?15?%}.sweep_code uni-button[data-v-23cc6472]{display:inline-block;width:%?200?%;height:%?80?%;line-height:%?80?%;background-color:#007aff;border-radius:%?160?% %?160?% %?160?% %?160?%;color:#fff}.exist_view[data-v-23cc6472]{padding:0 %?20?%}.exist_info[data-v-23cc6472]{background-color:#fff;border-radius:%?26?%}.exist_info uni-view[data-v-23cc6472]:nth-last-of-type(n+2){border-bottom:2px solid #d8d8d8;text-indent:1em;height:%?80?%;line-height:%?80?%;font-size:1.1em}.button_view[data-v-23cc6472]{background:#d8d8d8}.exist_info uni-button[data-v-23cc6472]{width:50%;display:inline-block;background-color:#00f;color:#fff;border-radius:0 0 0 %?25?%;margin-top:%?15?%}.exist_info uni-button[data-v-23cc6472]:last-child{background-color:#1aad19;border-radius:0 0 %?25?% 0}",""]),t.exports=e},fde8:function(t,e,o){"use strict";o.r(e);var n=o("3f95"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},fe0b:function(t,e,o){"use strict";var n=o("1d29"),i=o.n(n);i.a}}]);